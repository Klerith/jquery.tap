(function(l,t){"use strict";var h,n,c,i,a,s,r;function u(e,t){this.$target=e,this.selector=t.selector,this.data=t.data,this.moved=!1,this.namespace=c+a++,this.startX=0,this.startY=0,this.startTime=0,this.touchStartCount=0,this.setupHandlers().reset().enable()}t.support.touch="ontouchstart"in window||window.DocumentTouch&&l instanceof DocumentTouch,h=300,n=10,c=".__tap-helper",i="tap",a=0,s=["clientX","clientY","screenX","screenY","pageX","pageY"],r=function(n,a){var e,h,c,o;for(e=0,h=s.length,c=n.originalEvent.changedTouches[0],o=t.Event(i,n),o.type=i,o.data=a;h>e;e++)o[s[e]]=c[s[e]];return o},u.prototype={setupHandlers:function(){return this.onTouchStart=t.proxy(this._onTouchStart,this),this.onTouchMove=t.proxy(this._onTouchMove,this),this.onTouchEnd=t.proxy(this._onTouchEnd,this),this.onTouchCancel=t.proxy(this._onTouchCancel,this),this.onClick=t.proxy(this._onClick,this),this},enable:function(){return t.support.touch?this.$target.on("touchstart"+this.namespace,this.selector,this.onTouchStart):this.$target.on("click"+this.namespace,this.selector,this.onClick),this},disable:function(){return t.support.touch?this.$target.off("touchstart"+this.namespace,this.selector,this.onTouchStart):this.$target.off("click"+this.namespace,this.selector,this.onClick),this},reset:function(){return this.moved=!1,this.startX=0,this.startY=0,this.startTime=0,this.touchStartCount=0,this},destroy:function(){return this.onTouchCancel(),this.disable()},_onTouchStart:function(t){this.touchStartCount=t.originalEvent.touches.length,this.touchStartCount>1||(this.moved=!1,this.startX=t.originalEvent.touches[0].clientX,this.startY=t.originalEvent.touches[0].clientY,this.startTime=Date.now(),this.$target.on("touchmove"+this.namespace,this.selector,this.onTouchMove).on("touchend"+this.namespace,this.selector,this.onTouchEnd).on("touchcancel"+this.namespace,this.selector,this.onTouchCancel))},_onTouchMove:function(t){var e,o;e=t.originalEvent.touches[0].clientX,o=t.originalEvent.touches[0].clientY,(Math.abs(e-this.startX)>n||Math.abs(o-this.startY)>n)&&(this.moved=!0)},_onTouchEnd:function(t){!this.touchStartCount||t.originalEvent.touches.length>0||this.touchStartCount>1||(t.originalEvent.triggeredTap||this.moved||Date.now()-this.startTime>=h||(t.originalEvent.triggeredTap=!0,this.$target.trigger(r(t,this.data))),this.onTouchCancel())},_onTouchCancel:function(){this.reset().$target.off("touchmove"+this.namespace,this.selector,this.onTouchMove).off("touchend"+this.namespace,this.selector,this.onTouchEnd).off("touchcancel"+this.namespace,this.selector,this.onTouchCancel)},_onClick:function(t){t.isTrigger||t.originalEvent.triggeredTap||(t.originalEvent.triggeredTap=!0,t.type="tap",this.$target.trigger(t))}},t.event.special[i]={add:function(e){e.tap=new u(t(this),e)},remove:function(t){t.tap&&t.tap.destroy&&t.tap.destroy()}}})(document,jQuery)